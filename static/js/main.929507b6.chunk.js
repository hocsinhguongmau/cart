(this.webpackJsonpcart=this.webpackJsonpcart||[]).push([[0],{27:function(t,e,a){t.exports=a(65)},32:function(t,e,a){},55:function(t,e,a){},56:function(t,e,a){},57:function(t,e,a){},58:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){},62:function(t,e,a){},63:function(t,e,a){},65:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(25),u=a.n(r),l=(a(32),a(8)),o=a.n(l),i=a(12),d=a(14),s=a(26),m=a(6),p=a(3),f=a(4),E=a(5),h=a(13),v=a.n(h),b=(a(55),c.a.createContext(void 0)),j=c.a.createContext({carts:void 0,handleSubtractQuantity:function(){},handleAddQuantity:function(){},handleRemoveProduct:function(){},handleRemoveCart:function(){},handleApprovedCart:function(){}}),y=(a(56),function(t){var e=t.children,a=t.onClickHandler;return c.a.createElement("button",{onClick:a,className:"button"},e)}),O=(a(57),function(t){var e=t.cartProduct,a=t.cartIndex,r=t.withButtons,u=Object(n.useContext)(b),l=Object(n.useContext)(j);return u.map((function(t){return t.id===e.productId?c.a.createElement("tr",{className:"product",key:"product_".concat(t.id)},c.a.createElement("td",{className:"product__img"},c.a.createElement("img",{alt:t.title,src:t.image})),c.a.createElement("td",{className:"product__title"},t.title),c.a.createElement("td",{className:"product__price"},t.price," "),c.a.createElement("td",{className:"product__price"},r&&c.a.createElement(y,{onClickHandler:function(){return l.handleSubtractQuantity(a,t.id)}},c.a.createElement(f.a,{icon:E.b})),e.quantity,r&&c.a.createElement(y,{onClickHandler:function(){return l.handleAddQuantity(a,t.id)}},c.a.createElement(f.a,{icon:E.c}))),r&&c.a.createElement("td",null,c.a.createElement(y,{onClickHandler:function(){return l.handleRemoveProduct(a,t.id)}},c.a.createElement(f.a,{icon:E.e})))):null}))}),_=function(t){var e=t.cart,a=t.cartIndex,r=t.withButtons,u=Object(n.useContext)(j);return c.a.createElement("div",{className:"cartItem","data-testid":"cart-item"},c.a.createElement("p",{className:"cartItem__title"},"Order number: ",e.id,r&&c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{onClickHandler:function(){return u.handleRemoveCart(e.id)}},c.a.createElement(f.a,{icon:E.e})),c.a.createElement(y,{onClickHandler:function(){return u.handleApprovedCart(e.id)}},c.a.createElement(f.a,{icon:E.a})))),c.a.createElement("table",{cellPadding:0,cellSpacing:0,"data-testid":"cart-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Image"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"Quantity"),r&&c.a.createElement("th",null,"Remove"))),c.a.createElement("tbody",null,e.products.map((function(t){return c.a.createElement(O,{cartId:e.id,cartIndex:a,key:"product_".concat(t.productId),cartProduct:t,withButtons:r})})))))},N=(a(58),function(t){var e=t.cartProduct,a=(t.cartIndex,Object(n.useContext)(b));return a.map((function(t){return t.id===e.productId?c.a.createElement("tr",{className:"product",key:"product_".concat(t.id)},c.a.createElement("td",{className:"product__img"},c.a.createElement("img",{alt:t.title,src:t.image})),c.a.createElement("td",{className:"product__title"},t.title),c.a.createElement("td",{className:"product__price"},t.price," "),c.a.createElement("td",{className:"product__price"},e.quantity),c.a.createElement("td",null,function(t,e){var a=0;return e>1?(2===e?a=.2:3===e?a=.3:e>=4&&(a=.4),c.a.createElement(c.a.Fragment,null,c.a.createElement("del",null,"$",(t*e).toFixed(2)),c.a.createElement("br",null),"-",100*a,"%",c.a.createElement("br",null),c.a.createElement("span",{className:"price"},"$",(t*e-t*e*a).toFixed(2)))):"$".concat((t*e).toFixed(2))}(t.price,e.quantity))):null}))}),g=(a(59),function(t){var e=t.cartProduct,a=Object(n.useContext)(b),r=Object(n.useState)(0),u=Object(p.a)(r,2),l=u[0],o=u[1];return Object(n.useEffect)((function(){!function(){var t=0;e.forEach((function(e,n){var c=Number(null===a||void 0===a?void 0:a.filter((function(t){return t.id===e.productId})).map((function(t){return t.price})));2===e.quantity?c-=.2*c:3===e.quantity?c-=.3*c:e.quantity>=4&&(c-=.4*c),t+=e.quantity*c})),o(Number(t.toFixed(2)))}()}),[]),c.a.createElement("div",{className:"summaryItem","data-testid":"summary-item"},c.a.createElement("table",{cellPadding:0,cellSpacing:0,"data-testid":"summary-table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Image"),c.a.createElement("th",null,"Name"),c.a.createElement("th",null,"Price"),c.a.createElement("th",null,"Quantity"),c.a.createElement("th",null,"Total"))),c.a.createElement("tbody",null,e.map((function(t){return c.a.createElement(N,{key:"product_".concat(t.productId),cartProduct:t})})),c.a.createElement("tr",{className:"total-price"},c.a.createElement("td",{colSpan:4},"Total"),c.a.createElement("td",{colSpan:1},"$",l)))))}),I=(a(60),a(61),function(t){var e=t.discards;return c.a.createElement("div",{className:"discards"},c.a.createElement("h2",{className:"discards__title"},"Your discard list"),e.map((function(t,e){return c.a.createElement("div",{key:"discard_".concat(t.id)},c.a.createElement(_,{key:"cart_".concat(t.id),cart:t,cartIndex:e}))})))}),x=(a(62),function(t){var e=t.approved;return c.a.createElement("div",{className:"approved"},c.a.createElement("h2",{className:"approved__title"},"Your approved list"),e.map((function(t,e){return c.a.createElement("div",{key:"approved_".concat(t.id)},c.a.createElement(_,{key:"cart_".concat(t.id),cart:t,cartIndex:e}))})))}),C="https://fakestoreapi.com",k=function(){var t=Object(n.useState)(!0),e=Object(p.a)(t,2),a=e[0],r=e[1],u=Object(n.useState)(null),l=Object(p.a)(u,2),h=l[0],y=l[1],O=Object(n.useState)(null),N=Object(p.a)(O,2),k=N[0],S=N[1],P=Object(n.useState)([]),q=Object(p.a)(P,2),F=q[0],w=q[1],B=Object(n.useState)([]),Q=Object(p.a)(B,2),A=Q[0],R=Q[1],T=Object(n.useState)([]),H=Object(p.a)(T,2),L=H[0],Y=H[1],$=Object(n.useState)([]),D=Object(p.a)($,2),J=D[0],M=D[1],z=Object(n.useState)(!1),G=Object(p.a)(z,2),K=G[0],U=G[1],V=Object(n.useState)([]),W=Object(p.a)(V,2),X=W[0],Z=W[1],tt=function(){var t=[];J.forEach((function(e){return e.products.forEach((function(e){t.push(e)}))}));var e=t.reduce((function(t,e){var a=e.productId,n=e.quantity;return t[a]=t[a]||{productId:a,quantity:0},t[a].quantity+=n,t}),{});Z(Object.values(e)),U(!0)};return Object(n.useEffect)((function(){var t=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("".concat(C,"/carts?limit=").concat(5)).then((function(t){w(t.data)})).catch((function(t){y(t)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(!0),t.next=3,v.a.get("".concat(C,"/products")).then((function(t){R(t.data)})).catch((function(t){S(t)})).then((function(){return r(!1)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),t()}),[]),c.a.createElement("div",{className:"cart","data-testid":"cart"},c.a.createElement("h1",{className:"cart__title"},"Your cart"),c.a.createElement(b.Provider,{value:A},!K&&c.a.createElement(c.a.Fragment,null,c.a.createElement(j.Provider,{value:{carts:F,handleSubtractQuantity:function(t,e){var a=Object(m.a)(F),n=a[t].products.map((function(t){return t.productId===e?t.quantity<1?t:{productId:t.productId,quantity:t.quantity-1}:t}));a[t].products=n,w(a)},handleAddQuantity:function(t,e){var a=Object(m.a)(F),n=a[t].products.map((function(t){return t.productId===e?{productId:t.productId,quantity:t.quantity+1}:t}));a[t].products=n,w(a)},handleRemoveProduct:function(t,e){var a=Object(m.a)(F),n=a[t].products,c=n.filter((function(t){return t.productId===e})),r=Object(m.a)(L);if(void 0===r.find((function(e){return e.id===a[t].id}))){var u=a[t],l=(u.products,Object(s.a)(u,["products"])),o=Object(d.a)(Object(d.a)({},l),{},{products:c});r.push(o)}else r.forEach((function(e){e.id===a[t].id&&e.products.push(c[0])}));if(n.length>1){var i=n.filter((function(t){return t.productId!==e}));a[t].products=i,w(a)}else{var p=a.filter((function(e,a){return a!==t}));w(p)}Y(r),fetch("".concat(C,"/products/").concat(e),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){return console.log(t)}))},handleRemoveCart:function(t){var e=F.filter((function(e){return e.id!==t})),a=Object(m.a)(L);F.forEach((function(e){e.id===t&&a.push(e)})),w(e),Y(a),fetch("".concat(C,"/carts/").concat(t),{method:"DELETE"}).then((function(t){return t.json()})).then((function(t){return console.log(t)})),F.length<2&&tt()},handleApprovedCart:function(t){var e=F.filter((function(e){return e.id!==t})),a=Object(m.a)(J);F.forEach((function(e){e.id===t&&(a.push(e),fetch("".concat(C,"/carts"),{method:"POST",body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(t){return console.log(t)})))})),w(e),M(a),F.length<2&&tt()}}},h?"Failed to load cart":null,k?"Failed to load products":null,a?c.a.createElement("p",{className:"loading"},c.a.createElement(f.a,{className:"fa-spin",icon:E.d})):void 0!==F?F.map((function(t,e){return c.a.createElement(_,{key:"cart_".concat(t.id),cart:t,cartIndex:e,withButtons:!0})})):null)),K&&c.a.createElement(c.a.Fragment,null,c.a.createElement(g,{cartProduct:X}),c.a.createElement("div",{className:"choice-lists"},c.a.createElement(x,{approved:J,withButtons:!1}),L.length?c.a.createElement(I,{discards:L,withButtons:!1}):c.a.createElement("div",{className:"discards"},c.a.createElement("h2",{className:"discards__title"},"You have no discard item"))))))},S=(a(63),function(){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"container"},c.a.createElement(k,null)))}),P=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,66)).then((function(e){var a=e.getCLS,n=e.getFID,c=e.getFCP,r=e.getLCP,u=e.getTTFB;a(t),n(t),c(t),r(t),u(t)}))};a(64),u.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),P()}},[[27,1,2]]]);
//# sourceMappingURL=main.929507b6.chunk.js.map